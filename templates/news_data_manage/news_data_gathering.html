<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>NewsClassifySystem</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.4 -->
    <link href="/staticfiles/AdminLTE/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"
          type="text/css"/>
    <!-- Ionicons -->
    <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css"/>
    <!-- daterange picker -->
    <link href="/staticfiles/AdminLTE/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet"
          type="text/css"/>
    <!-- iCheck for checkboxes and radio inputs -->
    <link href="/staticfiles/AdminLTE/plugins/iCheck/all.css" rel="stylesheet" type="text/css"/>
    <!-- Bootstrap Color Picker -->
    <link href="/staticfiles/AdminLTE/plugins/colorpicker/bootstrap-colorpicker.min.css" rel="stylesheet"
          type="text/css"/>
    <!-- Bootstrap time Picker -->
    <link href="/staticfiles/AdminLTE/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet"
          type="text/css"/>
    <!-- Select2 -->
    <link href="/staticfiles/AdminLTE/plugins/select2/select2.min.css" rel="stylesheet" type="text/css"/>
    <!-- Theme style -->
    <link href="/staticfiles/AdminLTE/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css"/>
    <!-- AdminLTE Skins. Choose a skin from the css/skins
           folder instead of downloading all of them to reduce the load. -->
    <link href="/staticfiles/AdminLTE/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css"/>
    <!-- daterange picker -->
    <link rel="stylesheet" href="/staticfiles/AdminLTE/plugins/daterangepicker/daterangepicker-bs3.css">

    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
</head>
<body class="skin-blue sidebar-mini">
<div class="wrapper">

    <header class="main-header">
        <a href="index" class="logo">
            news_classyfy
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">

                <!-- User Account: style can be found in dropdown.less -->
                <li class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <img src="/staticfiles/image/admin.jpg" class="user-image" alt="User Image">
                        <span class="hidden-xs">Admin</span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="/staticfiles/image/admin.jpg" class="img-circle" alt="User Image">

                            <p>
                                Alexander Pierce - Web Developer
                                <small>Member since Nov. 2012</small>
                            </p>
                        </li>
                        <!-- Menu Body -->
                        <li class="user-body">
                            <div class="row">
                                <div class="col-xs-4 text-center">
                                    <a href="#">Followers</a>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <a href="#">Sales</a>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <a href="#">Friends</a>
                                </div>
                            </div>
                            <!-- /.row -->
                        </li>
                        <!-- Menu Footer-->
                        <li class="user-footer">
                            <div class="pull-left">
                                <a href="#" class="btn btn-default btn-flat">Profile</a>
                            </div>
                            <div class="pull-right">
                                <a href="#" class="btn btn-default btn-flat">Sign out</a>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        </nav>
    </header>
    <aside class="main-sidebar">
        <section class="sidebar">
            <ul class="sidebar-menu">
                <li class="header"><b>新闻分类系统</b></li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-diamond"></i>
                        <span>新闻数据管理</span><i class="fa fa-angle-left pull-right"></i>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="news_data_gathering"><i class="fa fa-circle-o"></i> 新闻数据采集</a></li>
                        <li><a href="news_data_preprocess"><i class="fa fa-circle-o"></i> 新闻数据处理</a></li>
{#                        <li><a href="word_to_vec"><i class="fa fa-circle-o"></i> 生成词向量</a></li>#}
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-diamond"></i>
                        <span>新闻关键词提取</span><i class="fa fa-angle-left pull-right"></i>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="keyword_extraction"><i class="fa fa-circle-o"></i> 新闻关键词提取</a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-diamond"></i>
                        <span>新闻数据分类</span><i class="fa fa-angle-left pull-right"></i>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="CNN_classifier"><i class="fa fa-circle-o"></i> 基于CNN分类</a></li>
                        <li><a href="LSTM_classifier"><i class="fa fa-circle-o"></i> 基于LSTM分类</a></li>
                        <li><a href="RNN_classifier"><i class="fa fa-circle-o"></i> 基于RCNN分类</a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-diamond"></i>
                        <span>系统词典管理</span><i class="fa fa-angle-left pull-right"></i>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="news_data_gathering"><i class="fa fa-circle-o"></i> 词向量训练</a></li>
                        <li><a href="news_data_preprocess"><i class="fa fa-circle-o"></i> 语料库管理</a></li>
                        <li><a href="word_to_vec"><i class="fa fa-circle-o"></i> 新闻词库管理</a></li>
                    </ul>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-diamond"></i>
                        <span>用户管理</span><i class="fa fa-angle-left pull-right"></i>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="user_manage"><i class="fa fa-circle-o"></i> 用户管理</a></li>

                    </ul>
                </li>
            </ul>
        </section>
    </aside>
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                新闻采集
            </h1>
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-md-12">
                    <div class="box box-warning">
                        <div class="box-header with-border">
                            <h3 class="box-title">新闻采集参数设置</h3>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body">
                            <form role="form">
                                <!-- text input -->
                                <div class="form-group">
                                    <label>门户网站</label>
                                    <select class="form-control" id="news_site">
                                        <option value="http://www.toutiao.com">今日头条</option>
                                        <option value="http://www.news.qq.com">腾讯新闻</option>
                                        <option value="http://www.news.163.com">网易新闻</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>抓取起止时间:</label>
                                    <div class="input-group">
                                        <div class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                        <input type="text" class="form-control pull-right" id="reservation">
                                    </div>
                                    <!-- /.input group -->
                                </div>
                                <div class="form-group">
                                    <label>抓取页面数</label>
                                    <input type="text" class="form-control" placeholder="Enter ..." id="page_numbers">
                                </div>
                                <div class="form-group">
                                    <label>新闻类别</label>
                                    <select multiple="" class="form-control" id="news_ctgs">
                                        <option value="society">社会</option>
                                        <option value="edu">教育</option>
                                        <option value="sports">体育</option>
                                        <option value="travel">旅游</option>
                                        <option value="military">军事</option>
                                        <option value="finance">财经</option>
                                        <option value="tech">科技</option>
                                        <option value="food">美食</option>
                                        <option value="health">健康</option>
                                        <option value="car">汽车</option>
                                        <option value="entertainment">娱乐</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-default btn-block" id="news_gathering">
                                        开始采集新闻数据
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- /.box-body -->
                    </div>
                </div>

                <div class="col-md-12">
                    <div class="box box-default">
                        <div class="box-header with-border">
                            <i class="fa fa-bullhorn"></i>

                            <h3 class="box-title">采集结果</h3>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body" id="gathering_news_result">

                        </div>
                        <!-- /.box-body -->

                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<footer class="main-footer"></footer>
<!-- jQuery 2.1.4 -->
<script src="/staticfiles/AdminLTE/plugins/jQuery/jQuery-2.1.4.min.js" type="text/javascript"></script>
<!-- Bootstrap 3.3.2 JS -->
<script src="/staticfiles/AdminLTE/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<!-- FastClick -->
<script src="/staticfiles/AdminLTE/plugins/fastclick/fastclick.min.js" type="text/javascript"></script>
<!-- Select2 -->
<script src="/staticfiles/AdminLTE/plugins/select2/select2.full.min.js" type="text/javascript"></script>
<!-- AdminLTE App -->
<script src="/staticfiles/AdminLTE/dist/js/app.min.js" type="text/javascript"></script>
<!-- AdminLTE for demo purposes -->
<script src="/staticfiles/AdminLTE/dist/js/demo.js" type="text/javascript"></script>
<!-- CK Editor -->
<script src="https://cdn.ckeditor.com/4.4.3/standard/ckeditor.js" type="text/javascript"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="/staticfiles/AdminLTE/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"
        type="text/javascript"></script>
<!-- ChartJS 1.0.1 -->
<script src="/staticfiles/AdminLTE/plugins/chartjs/Chart.min.js" type="text/javascript"></script>
<!-- date-range-picker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
<script src="/staticfiles/AdminLTE/plugins/daterangepicker/daterangepicker.js"></script>

<script>
    $(function () {
        //Date range picker
        $('#reservation').daterangepicker();

        //新闻爬取
        $('#news_gathering').click(function () {
            var ctgs = $('#news_ctgs').val() || []
            ctgs = ctgs.join(",")
            $.ajax({
                url: 'ajax_gathering_news',
                data: {
                    news_site: $('#news_site').val(),
                    news_start_end_time: $('#reservation').val(),
                    page_numbers: $('#page_numbers').val(),
                    news_ctg: ctgs
                },
                type: "GET",
                dataType: 'json',
                async: true,

                success: function (data) {
                    for (var i = 0; i < data.news.length; i++) {
                        {#                        alert(data.news[i].news_title)#}
                        $('#gathering_news_result').append(
                            '<div class="box box-solid">' +
                            '<div class="box-header with-border">' +
                            '<i class="fa fa-text-width"></i>' +
                            '<h3 class="box-title">' +
                            data.news[i].news_title +
                            '</h3>' +
                            '</div>' +
                            '<!-- /.box-header -->' +
                            '<div class="box-body">' +
                            '<dl>' +
                            '<dt>' +
                            '类别' +
                            '</dt>' +
                            '<dd>' +
                            data.news[i].news_ctg +
                            '</dd>' +
                            '<dt>' +
                            '新闻内容' +
                            '</dt>' +
                            '<dd>' +
                            data.news[i].news_content +
                            '</dd>' +
                            '<dt>' +
                            'URL' +
                            '</dt>' +
                            '<dd>' +
                            data.news[i].news_url +
                            '</dd>' +
                            '<dt>' +
                            '时间' +
                            '</dt>' +
                            '<dd>' +
                            data.news[i].news_time +
                            '</dd>' +
                            '</dl></div></div>'
                        );
                    }
                },
                error: function () {
                    alert("error")
                }

            });
        });
    });
</script>
</body>
</html>